# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## 生命周期

> 组件从诞生到销毁会经历一系列的过程，该过程就叫做生命周期。React 在组件的生命周期中提供了一系列的钩子函数（类似于事件），可以让开发者在函数中注入代码，这些代码会在适当的时机调用执行

_生命周期仅在类组件中，函数组件每次调用都是重新运行函数，旧的组件即刻被销毁_

### 旧版生命周期（React < 16.0.0）

_React官方认为：某个数据的来源必须是单一的_

<!-- 初始化阶段 -->

1. constructor

- 同一个组件对象只会创建一次
- 不能在第一次挂载到页面之前，调用 setState，为了避免问题，构造函数中严禁使用 setState

<!-- 挂载阶段 -->

2. componentWillMount

- 正常情况下，和构造函数一样，它只会运行一次

- 可以使用 setState，但是为了避免 bug，不允许使用，因为在某些特殊情况下，该函数可能会调用多次（比如拦截了生命周期或 SRR 和客户端会一起执行）

3. render

- 返回一个虚拟的 DOM，会被挂载到 DOM 数中，最终渲染到页面的真实 DOM 中

- render 可能不止运行一次，只需要重新渲染，就会重新运行

- 严禁使用 setState，因为可能导致无限递归调用

4. componentDidMount

- 只会执行一次

- 可以使用 setState

- 通常情况下，会将网络请求，启动定时器等一开始需要的操作，书写到该函数中

5. 组件被激活，处于活跃状态

<!-- 更新阶段 -->

6. componentWillReceiveProps

- 即将接收新的属性值

- 参数为新的属性对象

- 该函数可能会导致一些 bug，所以不推荐使用

7. shouldComponentUpdate

- 指示 React 是否需要重新渲染该组件，通过返回 true 和 false 来指定

- 默认情况下，会直接返回 true

- 可以在这，进行性能优化

8. componentWillUpdate

- 组件即将被重新渲染

9. render

- 返回一个虚拟的 DOM，会被挂载到 DOM 数中，最终渲染到页面的真实 DOM 中

- render 可能不止运行一次，只需要重新渲染，就会重新运行

- 严禁使用 setState，因为可能导致无限递归调用

10. componentDidUpdate

- 虚拟DOM已经重新挂载到页面中，成为真实的DOM

11. componentWillUnmount

- 通常在该函数中，销毁一些组件依赖的资源，比如定时器
