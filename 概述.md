# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## HOOK 简介

> 类组件有以下问题：

1. 繁琐的生命周期函数

2. this 指向，通过 bind 改变或是使用 ES Next 语法（箭头函数的形式）

3. 其它。。。

> 函数组件更加纯粹，React >= 16.8.0

- 提供了类似于类组件的生命周期函数的功能

- HOOK 专门用于增强函数组件的功能（HOOK 无法用于类组件），理论上可以取缔类组件

- React 官方提倡使用，但目前没有计划移除类组件，只是鼓励使用函数组件

- HOOK（钩子），本质上就是一个函数，命名规范是以 use 开头的小驼峰式，该函数可以挂载任何功能

### StateHook

> 通过使用 useState（要导入），实现类似于类组件的状态，将括号中的值当作默认值（undefined），并返回一个有两项的数组，分别表示的是：

1. 状态值

2. 改变状态值的函数

> 在函数组件中，可以有多个状态，在类组件中有且仅有一个

> 正是因为这一特性，React 建议的是：将各个功能不同的状态分开（横切关注点）

3. 改变状态值的函数会直接对原有值进行覆盖

4. 类似于类组件的 setState，当是 DOM 节点时处理的事件是同步的，除此之外是异步的，会加入到一个执行队列中，等待执行

5. 不要信任 useState 中的状态值，如果要使用的话，使用回调函数或第一个传入函数

6. 当调用函数的时候，本来是应该重新渲染该组件以及其的子组件，但是使用了 useState 后，出现了差异：

1）每次调用该函数组件的时候，都会根据 useState 中的状态值保存下标和对应的值

- 比如说第一次调用，会将下标标记为 0，并保存状态值，第二次调用的时候，下标标记为 1，并保存状态值，依次类推。。。

2）当再次调用该函数组件的时候，会根据下标，依次比较对应的状态值是否相同（Object.is），如果相同，会直接返回，而不是再次新建，并赋值为默认值

7. 最好是写到函数的起始位置，便于阅读

8. 严禁出现在代码块（循环、条件判断）中

9. 强制刷新组件：

- 类组件中：通过 this.forceUpdate()方法，如果调用了该方法，不会运行 shouldComponentUpdate 函数

- 函数组件中：直接传递一个空对象，方式如下

```js
const [, forceUpdate] = useState({});

onClick={() => {
  forceUpdate({});
}}
```
