# redux 和 router 的结合使用

1. 用于将 redux 和 router 进行结合

2. 本质上，router 中的某些数据可能会跟数据仓库中的数据进行联动

3. 该组件会将下面的路由数据和仓库保持同步

   1. action：它不是 redux 的 action，表示的是路由跳转的方式（POP、PUSH、REPLACE）

   2. location：它记录了当前的地址信息

## connectRouter

> 这是一个函数，调用后会返回一个管理仓库中路由信息的 reducer，该函数需要传递一个参数（history 对象）

## routerMiddleware

> 该函数会返回一个 redux 中间件，用于拦截一些特殊的 action

## ConnectRouter

> 这是一个组件，用于向上下文提供一个 history 对象和其它的路由信息（与 react-router 提供的信息一致）

> 该库的目的是：保证整个过程中使用的是同一个 history 对象

### 使用过程

> 依赖于 history 库

1. 传递参数 history

2. 使用 routerMiddleware 中间件，该中间件放在第一个位置

3. 使用 ConnectRouter 组件替换 BrowserRouter 或者 HashRouter 组件，history={history}

## 一些 action 创建函数

1. push

2. replace

### 注意事项

1. 该库不是必须使用的，使用该库的目的是为了将路由信息放入仓库统一进行管理

2. 使用 NavLink 组件

3. {history}对象，不推荐

4. connect 函数，连接 redux 和 store，将数据放入仓库统一进行管理

5. 如果要监听 redux 的变化，要满足以下条件：

   1. 安装 chrome 插件：redux-devtools

   2. 安装第三方库：redux-devtools-extension

   3. 使用 redux-devtools-extension 库中提供的方法 composeWithDevTools，并包裹 applyMiddleware 函数
