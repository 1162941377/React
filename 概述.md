# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## 生命周期

> 组件从诞生到销毁会经历一系列的过程，该过程就叫做生命周期。React 在组件的生命周期中提供了一系列的钩子函数（类似于事件），可以让开发者在函数中注入代码，这些代码会在适当的时机调用执行

_生命周期仅在类组件中，函数组件每次调用都是重新运行函数，旧的组件即刻被销毁_

### 新版生命周期（React >= 16.0.0）

_React 官方认为：某个数据的来源必须是单一的_

<!-- 初始化阶段 -->

1. constructor

- 同一个组件对象只会创建一次
- 不能在第一次挂载到页面之前，调用 setState，为了避免问题，构造函数中严禁使用 setState

<!-- 挂载阶段 -->

2. static getDerivedStateFromProps

- 通过参数可以获取到新的属性和状态

- 该函数是静态的

- 该函数的返回值会覆盖掉组件的状态

- 该函数几乎没用

3. render

- 返回一个虚拟的 DOM，会被挂载到 DOM 数中，最终渲染到页面的真实 DOM 中

- render 可能不止运行一次，只需要重新渲染，就会重新运行

- 严禁使用 setState，因为可能导致无限递归调用

4. componentDidMount

- 只会执行一次

- 可以使用 setState

- 通常情况下，会将网络请求，启动定时器等一开始需要的操作，书写到该函数中

5. 组件被激活，处于活跃状态

<!-- 更新阶段 -->

6. static getDerivedStateFromProps

- 通过参数可以获取到新的属性和状态

- 该函数是静态的

- 该函数的返回值会覆盖掉组件的状态

- 该函数几乎没用

7. shouldComponentUpdate

- 指示 React 是否需要重新渲染该组件，通过返回 true 和 false 来指定

- 默认情况下，会直接返回 true

- 可以在这，进行性能优化

8. getSnapshotBeforeUpdate

- 真实的 DOM 构建完成，但还没实际渲染到页面中

- 在该函数中，通常用于实现一些附加的 DOM 操作

- 该函数的返回值，会作为 componentDidUpdate 的第三个参数传入

9. render

- 返回一个虚拟的 DOM，会被挂载到 DOM 数中，最终渲染到页面的真实 DOM 中

- render 可能不止运行一次，只需要重新渲染，就会重新运行

- 严禁使用 setState，因为可能导致无限递归调用

10. componentDidUpdate

- 虚拟 DOM 已经重新挂载到页面中，成为真实的 DOM

<!-- 销毁阶段 -->

11. componentWillUnmount

- 通常在该函数中，销毁一些组件依赖的资源，比如定时器
