# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## 站点

1. 无论是 Vue，还是 React，开发的单页应用程序，可能只是该站点的一部分（某一个功能块）

2. 一个单页应用程序，可能会划分为多个页面（几乎完全不同的页面效果）（组件）

3. 如果要在单页应用中完成组件的切换，需要实现下面两个功能：

1）根据不同的页面地址，展示不同的组件（核心）

2）完成无刷新的地址切换

> 把实现上述两个功能的插件，叫做 “路由”

## MVC

> 是一个 UI 的解决方案，用于降低 UI 以及 UI 关联的数据的复杂度

### 传统的 MVC

1. 服务端需要响应一个完整的 HTML

2. 该 HTML 中包含页面需要的数据

3. 浏览器仅承担渲染页面的作用

> 以上的这种方式叫做服务端渲染，即服务端将完整的页面组装好之后，一起发送给服务端，服务端需要处理 UI 中要用到的数据，并且要要将数据嵌入到页面中，最终生成一个完整的 HTML 页面响应，为了降低处理这个过程的复杂度，出现了 MVC 模式

1. Controller：处理模式，组装这次请求需要用到的数据

2. Model：需要用于渲染 UI 的数据模型

3. View：视图，用于将模型组装到页面中

### 前端 MVC 模式的难处

1. 前端的 Controller 要比服务端复杂多，因为前端中的 controller 处理的时候用户的操作，而用户操作的场景是复杂的

2. 对于那些组件化的框架（Vue、React），它们使用的是单向数据流。若需要共享数据，则必须将数据提升到顶层组件，然后数据再一层一层的传递，极其繁琐。虽然可以使用上下文来提供数据，但是数据的操作难以控制，容易导致调试错误的困难，以及数据还原的困难。并且，开发一个中大型项目，共享的数据很多，会导致上下文中的数据变得非常复杂

```js
value = {
  users: [{}, {}, {}],
  addUser: function (u) {},
  deleteUser: function (u) {},
  updateUser: function (u) {},
};
```

**前端需要一个独立的数据解决方案**

1. Flux：FaceBook 提出的数据解决方案，引入了 action 概念

> action：一个普通的对象，用于描述要干什么。action 是触发数据变化的唯一原因

> store：数据仓库，用于存储共享的数据。还可以根据不同的 action 更改仓库中的数据

```js
const loginAction = {
  type: "login",
  payload: {
    loginId: "admin",
    loginPwd: "123",
  },
};

const deleteAction = {
  type: "delete",
  payload: 1, // 用户id为1
};
```

2. Redux：在 Flux 的基础上，引入了 reducer 的概念

> reducer：处理器（类似于 controller），用于根据 action 来处理数据，处理后的数据会被仓库重新保存
