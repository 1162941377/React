# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## 工具

> 使用内置组件 React.StrictMode，React 会对子组件进行校验，规则如下：

1. 不能使用过时的 API

- findDOMNode，最先的出现的作用是：匹配真实的 DOM 元素，但在 ref 出现后，被移除

- 使用字符串的 ref，React 推荐使用的是：通过 React.createRef 创建的对象或是一个函数

- 旧版的 context API，在需要共享数据的类组件中使用静态属性 childContextTypes，使用属性 getChildContext 设置共享的数据，在需要用到 context 数据的类组件中使用静态属性 contextTypes

2. 识别不安全的（旧版）生命周期函数

> 旧版的生命周期函数 componentWillMount、componentWillReceiveFromProps、componentWillUpdate

3. 要在合适的生命周期函数中执行带有副作用的函数

- 副作用：异步处理函数（ajax 网络请求、定时器等）、对作用域之外的变量产生了影响、通过 setState 改变了该组件的状态、数据的本地存储

- 纯函数：不依赖于外部变量，不对作用域之外的变量产生影响

- React 推荐在生命周期函数：componentDidMount、componentDidUpdate、componentWillUNmount 中使用带有副作用的函数

_React 无法监测到带有副作用的函数的执行，会把不能使用副作用函数的生命周期函数执行两遍，仅在开发环境中有效，生产环境中只会执行一遍_

> 使用浏览器的插件 React Developer Tools 中的 profiler，进行性能调试

- 分析某一次提交或多次提交（更新），涉及到的组件的渲染时间

1. 火焰图：总的渲染时间以及其子组件渲染的时间

2. 排序图：各组件的渲染时间，并对其进行排序
