# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## 站点

1. 无论是 Vue，还是 React，开发的单页应用程序，可能只是该站点的一部分（某一个功能块）

2. 一个单页应用程序，可能会划分为多个页面（几乎完全不同的页面效果）（组件）

3. 如果要在单页应用中完成组件的切换，需要实现下面两个功能：

1）根据不同的页面地址，展示不同的组件（核心）

2）完成无刷新的地址切换

> 把实现上述两个功能的插件，叫做 “路由”

## Router

1. react-router：路由核心库，包含诸多和路由功能相关的代码

2. react-router-dom：利用路由核心库，结合实际页面，实现跟页面路由密切相关的功能

> 如果要在页面中使用，需要安装 react-router-dom，依赖于 react-router（会自动安装）

### 信息

1. Router 组件会创建一个上下文，并且会向上下文中注入一些信息

2. 该上下文对开发者是隐藏的，Route 组件若匹配到了地址，则这些上下文中的信息会作为属性传入对应的组件

#### History

> 它并不是 window.history 对象，利用该对象实现无刷新跳转地址

》问：为什么没有直接使用 history 对象

》答：

1. React-Router 中有两个模式：hash、history，如果直接使用 window.history，只能支持一种模式

2. 当使用 window.history.pushState 方法时，没有办法收到通知，将导致 React 无法知晓地址发生了变化，结果导致无法重新渲染组件

1）push：将某个新的地址入栈（历史记录栈）

    > 参数1：新的地址
    > 参数2：可选，附带的状态数据

2）replace：将某个新的地址替换当前栈中的地址

3）go：与 history 一致

4）forward：与 history 一致

5）back：与 history 一致

#### Location

1. 与 history.location 完全一致，是同一个对象，但是，与 window.location 不同

2. location 对象中记录了当前地址的相关信息

> 通产使用第三方库 query-string，用于解析地址中的数据

#### Match

> 该对象中保存了路由匹配的相关信息

1. isExact：根据当前的路径和路由配置的路径是否是精确匹配

2. params：获取路径规则中的对应的数据

3. 书写 path 属性时，可以书写一个 string pattern（字符串正则），形式为：(正则表达式)

   > 如果要实现动态路由匹配，和 Vue 一样，使用 :
   > 第三方库：path-to-regexp，将一个字符串转换为一个真正的正则表达式

4. 向某个页面传递数据的方式：

1）使用 state：在 push 页面时，加入 state

2）利用 search：把数据填写到地址栏中的 ? 后

3）利用 hash：把数据填写到 hash 后

4）params：把数据填写到路径中

#### 非路由组件获取路由信息

> 某些组件，并没有直接放到 Route 中，而是直接嵌套在其他普通组件中，因此，它的 props 中没有路由信息，如果这些组件需要获取路由信息，可以使用以下两种方式：

1. 将路由信息从父组件一层一层传递到子组件

2. 使用 react-router 提供的高阶组件 withRouter，包装要使用的组件，该高阶组件会返回一个新组件，新组件将向提供的组件注入路由信息
