# React

> 是由 Facebook 研发到的，严格来说不是框架，而是用于解决 UI 复杂的开源的 js 库，目前由 React 社区联合维护。

## HOOK 简介

> 类组件有以下问题：

1. 繁琐的生命周期函数

2. this 指向，通过 bind 改变或是使用 ES Next 语法（箭头函数的形式）

3. 其它。。。

> 函数组件更加纯粹，React >= 16.8.0

- 提供了类似于类组件的生命周期函数的功能

- HOOK 专门用于增强函数组件的功能（HOOK 无法用于类组件），理论上可以取缔类组件

- React 官方提倡使用，但目前没有计划移除类组件，只是鼓励使用函数组件

- HOOK（钩子），本质上就是一个函数，命名规范是以 use 开头的小驼峰式，该函数可以挂载任何功能

### EffectHook

1. 第一个参数是一个函数，如果要使用 async 语法，在函数内部使用一个立即执行的匿名函数即可

2. 第二个参数是数组，用于记录依赖的项，当依赖的项没有任何改变时，不会重新运行该函数

3. 有返回值，默认为 undefined，可以是一个函数，用于清除副作用函数

- 第一次运行的时候，该返回的函数不会执行

- 当第二次运行的时候，该返回的函数会先于第一个参数中的函数执行

- 当该副作用销毁时，一定会执行该返回的函数

4. 和 useState 一样，不能用于代码块（循环、条件判断）中

5. 由于闭包的影响，useEffect 中更新的值可能会出现延迟

6. 初次运行的时候，类似于类组件的生命周期函数 componentDidMount，不同的是：

- componentDidMount 函数是在虚拟的 DOM 树渲染完毕，还没显示到页面之前

- useEffect 的执行时间是在虚拟的 DOM 树渲染完毕，并显示到页面之后

7. 得到更新的时候，类似于类组件的生命周期函数 componentDidUpdate，不同的是：

- componentDidUpdate 函数是在虚拟的 DOM 树更新完毕，还没显示到页面之前

- useEffect 的执行时间是在虚拟的 DOM 树更新完毕，并显示到页面之前

8. 当组件销毁的时候，类似于类组件的生命周期 componentWillUnmount

9. useEffect 是异步函数，是在页面完成真实的 UI 渲染之后，因此它的执行是异步的，不会阻塞浏览器，与 componentDidMount、componentDidUpdate、componentWillUnMount 的区别如上所述

10. useEffect 函数在每次注册的时候，会覆盖之前的副作用函数，因此，尽量保持副作用函数的稳定，否则会难以控制
